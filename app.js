function Rex(){this.size=75,this.y=height-this.size/2,this.x=250,this.velocity=0,this.gravity=1,this.lift=-15,this.lives=5,this.show=function(){switch(this.lives){case 5:fill(0,55,0);break;case 4:fill(0,200,0);break;case 3:fill(255,255,0);break;case 2:fill(255,140,0);break;case 1:fill(255,0,0);break;default:fill(255,0,0)}ellipse(this.x,this.y,this.size,this.size)},this.update=function(){this.velocity+=this.gravity,this.y+=this.velocity,this.y>height-this.size/2&&(this.y=height-this.size/2,this.velocity=0),this.y<this.size/2&&(this.y=this.size/2,this.velocity=0)},this.jump=function(){this.y>=height-this.size/2-10&&(this.velocity+=this.lift)}}
var rex,spikes=[],spikesGap=60;function setup(){createCanvas(1500,700),rex=new Rex,spikes.push(new Spike(1))}function draw(){background(0);for(var e=spikes.length-1;e>=0;e--)spikes[e].show(),spikes[e].update(),spikes[e].hits(rex),spikes[e].offScreen()&&spikes.splice(e,1);if(rex.update(),rex.show(),frameCount%spikesGap==0)for(var s=this.getRandomInt(1,7),i=0;i<s;i++)spikes.push(new Spike(i))}function getRandomInt(e,s){return e=Math.ceil(e),s=Math.floor(s),Math.floor(Math.random()*(s-e))+e}function keyPressed(){32==keyCode&&rex.jump()}
function Spike(i){this.y=height,this.size=50,this.x=width+this.size*i,this.speed=15,this.highlight=!1,this.show=function(){fill(255),this.highlight&&fill(255,0,0),ellipse(this.x,this.y,this.size,this.size)},this.update=function(){this.x-=this.speed},this.offScreen=function(){return this.x<=0},this.hits=function(i){return Math.hypot(this.x-i.x,this.y-i.y)<=this.size/2+i.size/2&&(this.highlight||(i.lives-=1),this.highlight=!0,!0)}}